---
name: explore
command: explore
user_invocable: true
description: 方案探索。调研业界最佳实践（至少5个来源，包括不限于Github、Claude Code、Cursor、Gemini、Google等），对比分析后给出推荐方案。在需求澄清（/clarify）之后、架构设计（/design）之前使用。
---

# 方案探索 (Explore)

> **角色**：技术侦察兵，在行动前摸清地形
> **目标**：找到业界最佳实践，选择最优方案
> **原则**：至少 5 个来源、对比分析、给出推荐
> **流程**：`/clarify` 之后 → `/design` 之前
> **思考模式**：启用 ultrathink 深度思考，全面权衡方案利弊

---

## 依赖规范

本 Skill 依赖以下规范文件：

| 规范文件 | 覆盖内容 |
|---------|---------|
| `.claude/rules/代码质量.md` | 项目铁律（方案不能违反） |
| `.claude/rules/文档规范.md` | 调研文档存放位置和格式 |

> **职责分离**：本 Skill 定义方案探索**流程**，`rules/` 定义**约束标准**。

---

## 核心原则

| 原则 | 说明 |
|------|------|
| **先调研后设计** | 不闭门造车，先看业界怎么做 |
| **至少 5 个来源** | 调研要充分，不能只看一两个 |
| **2-3 个可行方案** | 不只给一个方案，要有对比 |
| **只选型不设计** | 架构设计交给 `/design` |
| **YAGNI** | 不推荐不需要的功能 |

---

## 触发方式

用户输入 `/explore` 时激活此 skill。

**适用场景**：
- 需求已明确，需要探索实现方案
- 复杂功能，需要调研业界最佳实践
- 不确定用哪种技术方案

**不做的事情**（交给 `/design`）：
- 模块划分
- 接口设计
- 数据模型设计

---

## 执行流程

### Phase 1: 确认需求（快速）

如果用户没有先执行 `/clarify`，快速确认：

```markdown
在开始方案调研前，请确认需求：

**要实现什么**：[一句话描述]
**验收标准**：[怎样算完成]

以上理解正确吗？
```

如果需求不清晰，建议先执行 `/clarify`。

---

### Phase 2: 调研业界方案（核心环节）

**必须调研至少 5 个来源**：

| 来源类型 | 说明 | 优先级 |
|---------|------|--------|
| GitHub 开源项目 | Star > 1000 优先 | 高 |
| 官方文档 | 框架/库的最佳实践 | 高 |
| 技术博客 | 知名团队的实践分享 | 中 |
| 技术社区 | Stack Overflow、Reddit | 中 |
| 学术论文/报告 | 如适用 | 低 |

**调研要点**：
- 核心实现思路
- 技术栈选择
- 优缺点分析
- 适用场景
- 踩坑经验

**输出调研对比表**：

```markdown
## 业界方案调研

| # | 来源 | 核心思路 | 优势 | 劣势 | 适用场景 |
|---|------|---------|------|------|---------|
| 1 | [项目/文章名](链接) | [简述] | [列举] | [列举] | [描述] |
| 2 | [项目/文章名](链接) | [简述] | [列举] | [列举] | [描述] |
| 3 | [项目/文章名](链接) | [简述] | [列举] | [列举] | [描述] |
| 4 | [项目/文章名](链接) | [简述] | [列举] | [列举] | [描述] |
| 5 | [项目/文章名](链接) | [简述] | [列举] | [列举] | [描述] |

### 调研结论
基于以上调研，主流方案是...，我们项目适合采用...
```

---

### Phase 3: 结合项目实际，筛选可行方案

考虑因素：
- **技术栈匹配**：Python/FastAPI、React/TS
- **团队熟悉度**：学习成本
- **维护成本**：长期可维护性
- **性能要求**：是否满足
- **时间约束**：能否按时完成

筛选出 **2-3 个可行方案**。

---

### Phase 4: 方案对比与推荐

```markdown
## 可行方案对比

### 方案 A：[名称]（推荐）
- **来源**：[调研来源]
- **概述**：一句话描述
- **核心思路**：xxx
- **优势**：
  - xxx
  - xxx
- **劣势**：
  - xxx
- **工作量**：约 X 天
- **风险**：xxx

### 方案 B：[名称]
- **来源**：[调研来源]
- **概述**：一句话描述
- **核心思路**：xxx
- **优势**：
  - xxx
- **劣势**：
  - xxx
- **工作量**：约 X 天
- **风险**：xxx

### 推荐理由

选择方案 A 是因为：
1. [理由1]
2. [理由2]
3. [理由3]
```

---

## 输出模板

方案确认后，输出调研文档：

```markdown
# [功能名称] 方案调研

**日期**：YYYY-MM-DD
**状态**：已确认

## 1. 背景
[为什么要做这个]

## 2. 需求概述
[来自 /clarify 的需求定义]

## 3. 业界调研
[调研对比表]

## 4. 方案选择
[选定的方案及理由]

## 5. 风险与缓解
[潜在风险和缓解措施]

---

下一步：/design（架构设计）
```

保存位置：`docs/设计文档/调研_[主题].md`

---

## 项目特定约束

### 技术栈（不可更改）

| 层次 | 技术选型 |
|------|---------|
| 前端 | React + TypeScript + Ant Design |
| 后端 | Python + FastAPI |
| 数据库 | MySQL + Qdrant |
| AI服务 | DashScope + OpenRouter（可配置） |

### 架构约束

> **规范来源**：`.claude/rules/代码质量.md`（项目铁律）

- **禁止降级**：方案不能包含降级/兜底逻辑（铁律一）
- **禁止硬编码**：所有配置必须从 `.env` 或 `runtime_config/` 读取（铁律二）
- **全栈完整**：方案必须同时考虑前后端（参见 `全栈开发.md`）

---

## 与其他 Skills 的关系

```
/clarify（需求澄清）
    ↓ 需求清晰后
/explore（方案探索）← 当前
    ↓ 方案确定后
/design（架构设计）
    ↓ 设计完成后
/plan（写计划）
    ↓
/run-plan（执行计划）
```

---

## 禁止行为

| 禁止 | 原因 |
|------|------|
| 跳过调研直接给方案 | 可能错过更好的方案 |
| 只调研 1-2 个来源 | 调研不充分 |
| 在 explore 阶段做详细设计 | 架构设计交给 `/design` |
| 推荐与项目技术栈不匹配的方案 | 增加学习成本 |

---

## ✅ 完成提示

当方案探索完成后，输出：

```
✅ 方案探索完成

📋 推荐方案：[方案名称]
📄 调研文档：docs/设计文档/调研_[主题].md

下一步：/design（架构设计）
```
