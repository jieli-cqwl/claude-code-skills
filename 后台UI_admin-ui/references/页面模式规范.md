# Admin UI 页面模式规范

> 标准化页面结构和交互模式

---

## 一、列表页模式

### 1.1 标准结构

```
┌─────────────────────────────────────┐
│ 页面标题                    [新增按钮] │
├─────────────────────────────────────┤
│ 搜索表单（inline 布局）              │
├─────────────────────────────────────┤
│ 数据表格                            │
│ ┌───┬───────┬──────┬──────┐        │
│ │ # │ 名称  │ 状态 │ 操作 │        │
│ ├───┼───────┼──────┼──────┤        │
│ │ 1 │ xxx   │ 启用 │ 编辑 │        │
│ └───┴───────┴──────┴──────┘        │
├─────────────────────────────────────┤
│ 分页器                              │
└─────────────────────────────────────┘
```

### 1.2 完整代码模板

```tsx
// src/pages/tenant/list/index.tsx
import { useState } from 'react';
import { Card, Table, Form, Input, Select, Button, Space, message } from 'antd';
import { PlusOutlined } from '@ant-design/icons';
import { useRequest } from 'ahooks';
import type { ColumnsType } from 'antd/es/table';
import { getTenantList, deleteTenant } from '@/services/tenant';
import TenantFormModal from './components/FormModal';

interface SearchParams {
  keyword?: string;
  status?: string;
}

const TenantList: React.FC = () => {
  const [searchForm] = Form.useForm();
  const [params, setParams] = useState<SearchParams>({});
  const [pagination, setPagination] = useState({ current: 1, pageSize: 10 });
  const [modalOpen, setModalOpen] = useState(false);
  const [editData, setEditData] = useState<TenantType>();

  // 列表请求
  const { data, loading, refresh } = useRequest(
    () => getTenantList({ ...params, ...pagination }),
    { refreshDeps: [params, pagination] }
  );

  // 搜索
  const onSearch = (values: SearchParams) => {
    setParams(values);
    setPagination({ ...pagination, current: 1 });
  };

  // 重置
  const onReset = () => {
    searchForm.resetFields();
    setParams({});
    setPagination({ ...pagination, current: 1 });
  };

  // 删除
  const onDelete = async (id: number) => {
    await deleteTenant(id);
    message.success('删除成功');
    refresh();
  };

  // 表格列
  const columns: ColumnsType<TenantType> = [
    { title: '姓名', dataIndex: 'name', width: 120 },
    { title: '手机号', dataIndex: 'phone', width: 140 },
    { title: '房间', dataIndex: 'roomName', width: 150 },
    {
      title: '状态',
      dataIndex: 'status',
      width: 100,
      render: (status) => <StatusTag status={status} />,
    },
    {
      title: '操作',
      width: 150,
      fixed: 'right',
      render: (_, record) => (
        <Space>
          <Button type="link" size="small" onClick={() => {
            setEditData(record);
            setModalOpen(true);
          }}>
            编辑
          </Button>
          <Button type="link" size="small" danger onClick={() => onDelete(record.id)}>
            删除
          </Button>
        </Space>
      ),
    },
  ];

  return (
    <div className="page-container">
      {/* 搜索区域 */}
      <Card className="search-card">
        <Form form={searchForm} layout="inline" onFinish={onSearch}>
          <Form.Item name="keyword">
            <Input placeholder="姓名/手机号" allowClear />
          </Form.Item>
          <Form.Item name="status">
            <Select placeholder="状态" allowClear style={{ width: 120 }}>
              <Select.Option value="active">在租</Select.Option>
              <Select.Option value="inactive">已退租</Select.Option>
            </Select>
          </Form.Item>
          <Form.Item>
            <Space>
              <Button type="primary" htmlType="submit">查询</Button>
              <Button onClick={onReset}>重置</Button>
            </Space>
          </Form.Item>
        </Form>
      </Card>

      {/* 表格区域 */}
      <Card
        title="租客列表"
        extra={
          <Button type="primary" icon={<PlusOutlined />} onClick={() => {
            setEditData(undefined);
            setModalOpen(true);
          }}>
            新增
          </Button>
        }
      >
        <Table
          columns={columns}
          dataSource={data?.records}
          rowKey="id"
          loading={loading}
          pagination={{
            ...pagination,
            total: data?.total,
            showSizeChanger: true,
            showQuickJumper: true,
            showTotal: (total) => `共 ${total} 条`,
            onChange: (page, pageSize) => setPagination({ current: page, pageSize }),
          }}
          scroll={{ x: 800 }}
        />
      </Card>

      {/* 表单弹窗 */}
      <TenantFormModal
        open={modalOpen}
        data={editData}
        onOk={async () => {
          setModalOpen(false);
          refresh();
        }}
        onCancel={() => setModalOpen(false)}
      />
    </div>
  );
};

export default TenantList;
```

---

## 二、详情页模式

### 2.1 标准结构

```
┌─────────────────────────────────────┐
│ ← 返回    页面标题         [编辑按钮] │
├─────────────────────────────────────┤
│ 基本信息                            │
│ ┌─────────────────────────────────┐ │
│ │ 姓名：张三    手机：138****1234  │ │
│ │ 房间：A栋101  状态：在租         │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 合同信息                            │
│ ┌─────────────────────────────────┐ │
│ │ ...                             │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

### 2.2 代码模板

```tsx
import { Card, Descriptions, Button, Space } from 'antd';
import { ArrowLeftOutlined } from '@ant-design/icons';
import { useNavigate, useParams } from 'react-router-dom';
import { useRequest } from 'ahooks';
import { getTenantDetail } from '@/services/tenant';

const TenantDetail: React.FC = () => {
  const { id } = useParams<{ id: string }>();
  const navigate = useNavigate();

  const { data, loading } = useRequest(() => getTenantDetail(Number(id)));

  return (
    <div className="page-container">
      {/* 页头 */}
      <Card className="page-header">
        <Space>
          <Button icon={<ArrowLeftOutlined />} onClick={() => navigate(-1)}>
            返回
          </Button>
          <span className="page-title">租客详情</span>
        </Space>
        <Button type="primary" onClick={() => navigate(`/tenant/edit/${id}`)}>
          编辑
        </Button>
      </Card>

      {/* 基本信息 */}
      <Card title="基本信息" loading={loading}>
        <Descriptions column={2}>
          <Descriptions.Item label="姓名">{data?.name}</Descriptions.Item>
          <Descriptions.Item label="手机号">{data?.phone}</Descriptions.Item>
          <Descriptions.Item label="身份证">{data?.idCard}</Descriptions.Item>
          <Descriptions.Item label="房间">{data?.roomName}</Descriptions.Item>
          <Descriptions.Item label="状态">
            <StatusTag status={data?.status} />
          </Descriptions.Item>
        </Descriptions>
      </Card>

      {/* 合同信息 */}
      <Card title="合同信息" loading={loading}>
        <Descriptions column={2}>
          <Descriptions.Item label="合同编号">{data?.contractNo}</Descriptions.Item>
          <Descriptions.Item label="租期">
            {data?.startDate} ~ {data?.endDate}
          </Descriptions.Item>
          <Descriptions.Item label="月租金">{data?.rent} 元</Descriptions.Item>
        </Descriptions>
      </Card>
    </div>
  );
};
```

---

## 三、表单页模式

### 3.1 标准结构

```
┌─────────────────────────────────────┐
│ ← 返回    新增/编辑租客              │
├─────────────────────────────────────┤
│ 基本信息                            │
│ ┌─────────────────────────────────┐ │
│ │ 姓名 [          ]               │ │
│ │ 手机 [          ]               │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│               [取消] [提交]          │
└─────────────────────────────────────┘
```

### 3.2 代码模板

```tsx
import { Card, Form, Input, Select, DatePicker, Button, Space, message } from 'antd';
import { ArrowLeftOutlined } from '@ant-design/icons';
import { useNavigate, useParams } from 'react-router-dom';
import { useRequest } from 'ahooks';

const TenantForm: React.FC = () => {
  const { id } = useParams<{ id: string }>();
  const navigate = useNavigate();
  const [form] = Form.useForm();
  const isEdit = Boolean(id);

  // 编辑时获取详情
  const { loading: detailLoading } = useRequest(
    () => getTenantDetail(Number(id)),
    {
      ready: isEdit,
      onSuccess: (data) => form.setFieldsValue(data),
    }
  );

  // 提交
  const { loading: submitLoading, run: submit } = useRequest(
    (values) => isEdit ? updateTenant(Number(id), values) : createTenant(values),
    {
      manual: true,
      onSuccess: () => {
        message.success(isEdit ? '更新成功' : '创建成功');
        navigate(-1);
      },
    }
  );

  return (
    <div className="page-container">
      {/* 页头 */}
      <Card className="page-header">
        <Space>
          <Button icon={<ArrowLeftOutlined />} onClick={() => navigate(-1)}>
            返回
          </Button>
          <span className="page-title">{isEdit ? '编辑租客' : '新增租客'}</span>
        </Space>
      </Card>

      {/* 表单 */}
      <Card loading={detailLoading}>
        <Form
          form={form}
          layout="vertical"
          style={{ maxWidth: 600 }}
          onFinish={submit}
        >
          <Form.Item
            label="姓名"
            name="name"
            rules={[{ required: true, message: '请输入姓名' }]}
          >
            <Input placeholder="请输入姓名" maxLength={20} />
          </Form.Item>

          <Form.Item
            label="手机号"
            name="phone"
            rules={[
              { required: true, message: '请输入手机号' },
              { pattern: /^1\d{10}$/, message: '手机号格式不正确' },
            ]}
          >
            <Input placeholder="请输入手机号" maxLength={11} />
          </Form.Item>

          <Form.Item>
            <Space>
              <Button type="primary" htmlType="submit" loading={submitLoading}>
                提交
              </Button>
              <Button onClick={() => navigate(-1)}>取消</Button>
            </Space>
          </Form.Item>
        </Form>
      </Card>
    </div>
  );
};
```

---

## 四、页面布局样式

```less
// src/styles/page.less
@import './variables.less';

.page-container {
  padding: @page-padding;

  > .ant-card {
    margin-bottom: @section-gap;

    &:last-child {
      margin-bottom: 0;
    }
  }
}

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;

  .page-title {
    font-size: @font-size-xl;
    font-weight: @font-weight-medium;
    margin-left: @spacing-lg;
  }
}

.search-card {
  .ant-card-body {
    padding-bottom: @spacing-sm;
  }
}
```

---

## 五、路由配置

```tsx
// src/router/index.tsx
import { createBrowserRouter } from 'react-router-dom';
import Layout from '@/layouts';

const router = createBrowserRouter([
  {
    path: '/',
    element: <Layout />,
    children: [
      { path: 'tenant', element: <TenantList /> },
      { path: 'tenant/:id', element: <TenantDetail /> },
      { path: 'tenant/create', element: <TenantForm /> },
      { path: 'tenant/edit/:id', element: <TenantForm /> },
    ],
  },
]);
```

---

## 六、目录结构

```
src/pages/tenant/
├── list/
│   ├── index.tsx              # 列表页
│   ├── index.module.less      # 列表页样式
│   └── components/
│       └── FormModal.tsx      # 表单弹窗
├── detail/
│   └── index.tsx              # 详情页
├── form/
│   └── index.tsx              # 新增/编辑页
└── index.ts                   # 导出
```
