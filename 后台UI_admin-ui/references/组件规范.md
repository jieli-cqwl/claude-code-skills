# Admin UI 组件规范

> 基于 Ant Design 5.x 的组件使用规范

---

## 一、组件引入规范

### 1.1 按需引入

```tsx
// ✅ 正确：按需引入
import { Button, Table, Form, Input } from 'antd';

// ❌ 错误：全量引入
import Antd from 'antd';
```

### 1.2 图标引入

```tsx
// ✅ 正确：按需引入图标
import { PlusOutlined, EditOutlined, DeleteOutlined } from '@ant-design/icons';

// ❌ 错误：全量引入
import * as Icons from '@ant-design/icons';
```

---

## 二、表格组件（Table）

### 2.1 标准表格模板

```tsx
import { Table, Space, Button, Tag } from 'antd';
import type { ColumnsType } from 'antd/es/table';

interface DataType {
  id: number;
  name: string;
  status: 'active' | 'inactive';
}

const columns: ColumnsType<DataType> = [
  {
    title: '名称',
    dataIndex: 'name',
    key: 'name',
    width: 200,
  },
  {
    title: '状态',
    dataIndex: 'status',
    key: 'status',
    width: 100,
    render: (status) => (
      <Tag color={status === 'active' ? 'success' : 'default'}>
        {status === 'active' ? '启用' : '禁用'}
      </Tag>
    ),
  },
  {
    title: '操作',
    key: 'action',
    width: 150,
    fixed: 'right',
    render: (_, record) => (
      <Space size="middle">
        <Button type="link" size="small">编辑</Button>
        <Button type="link" size="small" danger>删除</Button>
      </Space>
    ),
  },
];

// 使用
<Table
  columns={columns}
  dataSource={data}
  rowKey="id"
  pagination={{
    current: page,
    pageSize: 10,
    total: total,
    showSizeChanger: true,
    showQuickJumper: true,
    showTotal: (total) => `共 ${total} 条`,
  }}
  loading={loading}
  scroll={{ x: 1000 }}
/>
```

### 2.2 表格规范

| 规范 | 要求 |
|------|------|
| `rowKey` | 必须指定，使用唯一标识字段 |
| `width` | 每列必须指定宽度 |
| `scroll.x` | 列宽总和，启用横向滚动 |
| 操作列 | 固定在右侧 `fixed: 'right'` |
| 分页 | 显示总数、支持跳页 |

---

## 三、表单组件（Form）

### 3.1 标准表单模板

```tsx
import { Form, Input, Select, DatePicker, Button, Space } from 'antd';

interface FormValues {
  name: string;
  type: string;
  date: Dayjs;
}

const MyForm: React.FC = () => {
  const [form] = Form.useForm<FormValues>();

  const onFinish = (values: FormValues) => {
    console.log(values);
  };

  return (
    <Form
      form={form}
      layout="vertical"
      onFinish={onFinish}
      initialValues={{ type: 'default' }}
    >
      <Form.Item
        label="名称"
        name="name"
        rules={[{ required: true, message: '请输入名称' }]}
      >
        <Input placeholder="请输入名称" maxLength={50} />
      </Form.Item>

      <Form.Item
        label="类型"
        name="type"
        rules={[{ required: true, message: '请选择类型' }]}
      >
        <Select placeholder="请选择类型">
          <Select.Option value="default">默认</Select.Option>
          <Select.Option value="custom">自定义</Select.Option>
        </Select>
      </Form.Item>

      <Form.Item label="日期" name="date">
        <DatePicker style={{ width: '100%' }} />
      </Form.Item>

      <Form.Item>
        <Space>
          <Button type="primary" htmlType="submit">提交</Button>
          <Button onClick={() => form.resetFields()}>重置</Button>
        </Space>
      </Form.Item>
    </Form>
  );
};
```

### 3.2 表单规范

| 规范 | 要求 |
|------|------|
| `layout` | 优先使用 `vertical`（垂直布局） |
| `rules` | 必填项必须有校验规则 |
| `placeholder` | 每个输入框必须有提示 |
| `maxLength` | 文本输入必须限制长度 |
| 按钮顺序 | 主按钮在前，次按钮在后 |

### 3.3 搜索表单

```tsx
<Form layout="inline" onFinish={onSearch}>
  <Form.Item name="keyword">
    <Input placeholder="请输入关键词" allowClear />
  </Form.Item>
  <Form.Item name="status">
    <Select placeholder="状态" allowClear style={{ width: 120 }}>
      <Select.Option value="active">启用</Select.Option>
      <Select.Option value="inactive">禁用</Select.Option>
    </Select>
  </Form.Item>
  <Form.Item>
    <Space>
      <Button type="primary" htmlType="submit">查询</Button>
      <Button onClick={onReset}>重置</Button>
    </Space>
  </Form.Item>
</Form>
```

---

## 四、弹窗组件（Modal）

### 4.1 确认弹窗

```tsx
import { Modal } from 'antd';
import { ExclamationCircleFilled } from '@ant-design/icons';

Modal.confirm({
  title: '确认删除',
  icon: <ExclamationCircleFilled />,
  content: '删除后无法恢复，确认删除吗？',
  okText: '确认',
  okType: 'danger',
  cancelText: '取消',
  onOk: async () => {
    await deleteItem(id);
  },
});
```

### 4.2 表单弹窗

```tsx
const FormModal: React.FC<{
  open: boolean;
  data?: DataType;
  onOk: (values: FormValues) => Promise<void>;
  onCancel: () => void;
}> = ({ open, data, onOk, onCancel }) => {
  const [form] = Form.useForm();
  const [loading, setLoading] = useState(false);

  useEffect(() => {
    if (open && data) {
      form.setFieldsValue(data);
    } else {
      form.resetFields();
    }
  }, [open, data]);

  const handleOk = async () => {
    const values = await form.validateFields();
    setLoading(true);
    try {
      await onOk(values);
      form.resetFields();
    } finally {
      setLoading(false);
    }
  };

  return (
    <Modal
      title={data ? '编辑' : '新增'}
      open={open}
      onOk={handleOk}
      onCancel={onCancel}
      confirmLoading={loading}
      destroyOnClose
    >
      <Form form={form} layout="vertical">
        {/* 表单项 */}
      </Form>
    </Modal>
  );
};
```

### 4.3 弹窗规范

| 规范 | 要求 |
|------|------|
| `destroyOnClose` | 关闭时销毁内容 |
| `confirmLoading` | 提交时显示 loading |
| 宽度 | 小型 400px，中型 600px，大型 800px |
| 标题 | 明确操作类型（新增/编辑/详情） |

---

## 五、按钮组件（Button）

### 5.1 按钮类型使用

| 类型 | 用途 | 示例 |
|------|------|------|
| `primary` | 主要操作 | 提交、保存、确认 |
| `default` | 次要操作 | 取消、重置 |
| `link` | 链接操作 | 表格内操作 |
| `text` | 文本操作 | 不强调的操作 |
| `danger` | 危险操作 | 删除 |

### 5.2 按钮规范

```tsx
// ✅ 操作栏按钮
<Space>
  <Button type="primary" icon={<PlusOutlined />}>新增</Button>
  <Button icon={<ExportOutlined />}>导出</Button>
</Space>

// ✅ 表格内操作
<Space size="middle">
  <Button type="link" size="small">编辑</Button>
  <Button type="link" size="small" danger>删除</Button>
</Space>

// ✅ 表单提交
<Space>
  <Button type="primary" htmlType="submit">提交</Button>
  <Button onClick={onCancel}>取消</Button>
</Space>
```

---

## 六、消息反馈

### 6.1 Message（轻提示）

```tsx
import { message } from 'antd';

message.success('保存成功');
message.error('操作失败，请重试');
message.warning('请先选择数据');

// 加载中
const hide = message.loading('提交中...', 0);
hide(); // 完成后关闭
```

### 6.2 Notification（通知）

```tsx
import { notification } from 'antd';

notification.success({
  message: '审核通过',
  description: '租客张三的入住申请已通过审核',
});
```

### 6.3 使用场景

| 组件 | 场景 |
|------|------|
| `message` | 操作反馈（成功/失败） |
| `notification` | 系统通知、异步结果 |
| `Modal.confirm` | 需要用户确认的操作 |

---

## 七、状态标签（Tag）

```tsx
import { Tag } from 'antd';

const StatusTag: React.FC<{ status: string }> = ({ status }) => {
  const config: Record<string, { color: string; text: string }> = {
    pending: { color: 'warning', text: '待处理' },
    active: { color: 'success', text: '进行中' },
    completed: { color: 'default', text: '已完成' },
    failed: { color: 'error', text: '失败' },
  };

  const { color, text } = config[status] || { color: 'default', text: status };
  return <Tag color={color}>{text}</Tag>;
};
```

---

## 八、加载状态（Spin）

```tsx
import { Spin } from 'antd';

// 页面加载
<Spin spinning={loading}>
  <div className="content">...</div>
</Spin>

// 全屏加载
<Spin spinning={loading} fullscreen />

// 按钮加载
<Button type="primary" loading={submitting}>
  提交
</Button>
```

---

## 九、空状态（Empty）

```tsx
import { Empty, Button } from 'antd';

<Empty
  description="暂无数据"
  image={Empty.PRESENTED_IMAGE_SIMPLE}
>
  <Button type="primary">立即创建</Button>
</Empty>
```
