# H5 组件开发规范

> UniApp + Vue3 组件开发标准

---

## 一、组件命名规范

### 1.1 命名格式

```
comp-{功能描述}[-{变体}]
```

### 1.2 命名示例

| 组件名 | 用途 |
|--------|------|
| `comp-popup` | 底部弹窗基础组件 |
| `comp-popup-tips` | 提示类弹窗 |
| `comp-popup-picker` | 选择器弹窗 |
| `comp-form-configure` | 动态表单 |
| `comp-dropmenu-new` | 下拉筛选菜单 |
| `comp-notice` | Toast/Loading |
| `comp-empty` | 空状态 |
| `comp-card-info` | 信息卡片 |

### 1.3 禁止的命名

| 禁止 | 原因 |
|------|------|
| `Popup` | 缺少 comp- 前缀 |
| `comp_popup` | 使用下划线 |
| `compPopup` | 驼峰命名 |
| `popup-comp` | 前缀位置错误 |

---

## 二、组件结构规范

### 2.1 标准模板

```vue
<template>
  <view class="comp-xxx" :class="{ 'is-disabled': disabled }">
    <slot name="header"></slot>
    <view class="comp-xxx__content">
      {{ content }}
    </view>
    <slot name="footer"></slot>
  </view>
</template>

<script setup lang="ts">
interface Props {
  content?: string
  disabled?: boolean
}

const props = withDefaults(defineProps<Props>(), {
  content: '',
  disabled: false
})

const emit = defineEmits<{
  click: [value: string]
  change: [value: string]
}>()

// 方法
const handleClick = () => {
  if (props.disabled) return
  emit('click', props.content)
}
</script>

<style lang="scss" scoped>
.comp-xxx {
  // 容器样式

  &.is-disabled {
    opacity: 0.5;
    pointer-events: none;
  }

  &__content {
    // 内容样式
  }
}
</style>
```

---

## 三、Props 定义规范

### 3.1 使用 TypeScript 接口

```typescript
interface Props {
  // 必填项
  title: string

  // 可选项（带默认值）
  visible?: boolean
  disabled?: boolean

  // 复杂类型
  options?: OptionItem[]

  // 回调函数
  onConfirm?: (value: string) => void
}

const props = withDefaults(defineProps<Props>(), {
  visible: false,
  disabled: false,
  options: () => []
})
```

### 3.2 Props 命名规范

| 类型 | 命名规范 | 示例 |
|------|---------|------|
| 布尔值 | is/has/can/show 前缀 | `isDisabled`、`showHeader` |
| 回调函数 | on 前缀 | `onConfirm`、`onChange` |
| 数组 | 复数形式 | `options`、`items` |
| 对象 | 描述性名词 | `config`、`style` |

---

## 四、样式组织规范

### 4.1 BEM 命名

```scss
.comp-popup {
  // Block - 组件容器

  &__header {
    // Element - 头部
  }

  &__content {
    // Element - 内容区
  }

  &__footer {
    // Element - 底部
  }

  &--large {
    // Modifier - 大尺寸变体
  }

  &.is-visible {
    // State - 可见状态
  }
}
```

### 4.2 样式顺序

```scss
.comp-xxx {
  // 1. 定位
  position: relative;
  z-index: 10;

  // 2. 盒模型
  display: flex;
  width: 100%;
  padding: 20rpx;
  margin-bottom: 20rpx;

  // 3. 视觉
  background: $bgc-white;
  border-radius: 8rpx;
  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.08);

  // 4. 文字
  font-size: 28rpx;
  color: $text-black;

  // 5. 其他
  transition: all 0.3s ease;
}
```

---

## 五、Slot 使用规范

### 5.1 具名插槽

```vue
<template>
  <view class="comp-card">
    <view class="comp-card__header" v-if="$slots.header">
      <slot name="header"></slot>
    </view>

    <view class="comp-card__content">
      <slot></slot>
    </view>

    <view class="comp-card__footer" v-if="$slots.footer">
      <slot name="footer"></slot>
    </view>
  </view>
</template>
```

### 5.2 作用域插槽

```vue
<template>
  <view class="comp-list">
    <view v-for="(item, index) in list" :key="item.id">
      <slot name="item" :item="item" :index="index">
        {{ item.name }}
      </slot>
    </view>
  </view>
</template>
```

---

## 六、Emit 事件规范

### 6.1 事件定义

```typescript
const emit = defineEmits<{
  // 无参数
  close: []

  // 单参数
  change: [value: string]

  // 多参数
  select: [item: OptionItem, index: number]

  // 复杂对象
  submit: [data: FormData]
}>()
```

### 6.2 事件命名规范

| 场景 | 命名 |
|------|------|
| 值变化 | `change`、`update:modelValue` |
| 点击 | `click`、`tap` |
| 确认 | `confirm`、`submit` |
| 取消 | `cancel`、`close` |
| 选择 | `select`、`pick` |

---

## 七、easycom 配置

```json
// pages.json
{
  "easycom": {
    "autoscan": true,
    "custom": {
      "^comp-(.*)": "@/components/comp-$1/comp-$1.vue"
    }
  }
}
```

使用时无需手动导入：

```vue
<template>
  <!-- 直接使用，无需 import -->
  <comp-popup :visible="show" @close="show = false">
    <comp-empty v-if="!list.length" />
  </comp-popup>
</template>
```

---

## 八、组件文档模板

```vue
<!--
  组件名称: comp-xxx
  功能描述: 简要描述组件功能

  Props:
    - title: string (必填) 标题
    - visible: boolean (默认: false) 是否可见

  Events:
    - close: 关闭时触发
    - confirm: 确认时触发，参数为选中的值

  Slots:
    - default: 默认内容
    - header: 头部自定义

  示例:
    <comp-xxx
      title="标题"
      :visible="show"
      @close="show = false"
      @confirm="handleConfirm"
    />
-->
```
