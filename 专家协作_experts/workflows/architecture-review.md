# 架构评审工作流

> 适用于架构变更或技术方案评审

---

## 适用场景

- 重大架构变更
- 技术选型决策
- 性能优化方案
- 技术债务清理

---

## 参与专家

| 专家 | 职责 |
|------|------|
| tech-lead | 主持评审、决策协调 |
| backend-architect | 后端架构评估 |
| frontend-architect | 前端架构评估 |
| security-auditor | 安全影响评估 |

---

## 执行流程

```
┌─────────────────────────────────────────────────────────────┐
│                    Phase 1: 方案陈述                         │
├─────────────────────────────────────────────────────────────┤
│  tech-lead:                                                  │
│  - 说明变更背景                                              │
│  - 展示方案设计                                              │
│  - 列出预期收益                                              │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                    Phase 2: 多维度评审（并行）                │
├─────────────────────────────────────────────────────────────┤
│  backend-architect      frontend-architect   security-auditor│
│  - 技术可行性          - 用户体验影响       - 安全风险      │
│  - 性能影响            - 开发成本           - 合规性        │
│  - 运维复杂度          - 兼容性             - 数据安全      │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                    Phase 3: 问题汇总                         │
├─────────────────────────────────────────────────────────────┤
│  tech-lead:                                                  │
│  - 收集各专家意见                                            │
│  - 识别冲突点                                                │
│  - 整理待解决问题                                            │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                    Phase 4: 方案优化                         │
├─────────────────────────────────────────────────────────────┤
│  各专家协作:                                                 │
│  - 解决冲突点                                                │
│  - 完善方案细节                                              │
│  - 补充遗漏点                                                │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                    Phase 5: 决策                             │
├─────────────────────────────────────────────────────────────┤
│  tech-lead:                                                  │
│  - 综合评估                                                  │
│  - 给出建议（通过/修改/否决）                                │
│  - 记录决策依据                                              │
└─────────────────────────────────────────────────────────────┘
```

---

## 评审维度

### 技术维度

| 维度 | 评估点 |
|------|--------|
| 可行性 | 技术栈是否成熟、团队是否熟悉 |
| 性能 | 吞吐量、延迟、资源消耗 |
| 可扩展性 | 水平扩展能力、模块化程度 |
| 可维护性 | 代码复杂度、调试难度 |
| 运维 | 部署复杂度、监控能力 |

### 业务维度

| 维度 | 评估点 |
|------|--------|
| 用户体验 | 功能完整性、响应速度 |
| 兼容性 | 向后兼容、迁移成本 |
| 风险 | 失败影响、回滚能力 |

### 安全维度

| 维度 | 评估点 |
|------|--------|
| 数据安全 | 敏感数据保护、访问控制 |
| 合规性 | 法规要求、审计需求 |

---

## 评审结论模板

```markdown
## 架构评审结论

### 评审信息
- 方案名称：
- 评审日期：
- 参与专家：

### 评审结果
- [ ] 通过 - 方案可行，可以实施
- [ ] 有条件通过 - 需解决以下问题后实施
- [ ] 需要修改 - 重大问题需要重新设计
- [ ] 否决 - 方案不可行

### 问题清单
| # | 问题 | 严重程度 | 建议 |
|---|------|---------|------|
| 1 | | | |

### 决策依据
- ...

### 后续行动
- ...
```

---

## 使用示例

```
用户: /experts 评审微服务拆分方案

tech-lead 组织评审:
- backend-architect: 服务边界合理，但需要注意分布式事务
- frontend-architect: 前端需要适配多服务 API 聚合
- security-auditor: 服务间通信需要 mTLS

结论: 有条件通过，需解决分布式事务和服务间安全问题
```
